<template name = "home">

<head>
	<title>QuoteNet</title>
</head>

<body>
	{{> nav}}
	<div class="container">
		{{#if currentUser}}
			{{> mainpage}}
		{{else}}
			{{> login}}
		{{/if}}
	</div>
</body>
</template>

<template name="mainpage">
	<div class="row">
			<div class="col-md-9">
				{{> heading}}
				{{#if currentUser.quoteMaster}}
					{{> quoteMasterPage}}
				{{else}}
					<h3><span class="label label-default"> Points: {{currentUser.points}} </span></h3>
					{{#if currQuestion}}
						{{> currentQ}}
						{{> hints}}					
						{{> input}}
						{{> answers}}
					{{else}}
						{{> leaderboard}}
					{{/if}}
				{{/if}}
			</div> 
			<div class="col-md-3">
			{{> activityFeed}}
			</div>
	</div>
</template>

<template name="leaderboard">
	<div class="row">
	<h3> No Current Game, Leaderboard: </h3>
	{{#each users}}
		<h4>{{username}} : {{points}}</h4>
	{{/each}}
	</div>
</template>

<template name="activityFeed">
	<h3> Activity Feed: </h3>
	<ul>
		{{#each activites}}
			<li> {{user}} <b>{{action}}</b> {{body}}</li>
		{{/each}}
	</ul>
</template>

<template name="nav">
	<div id="nav-wrapper">
		<nav class="navbar navbar-default" role="navigation">
		  <div class="navbar-header pull-right">
		    {{>logout}}
		  </div>
		  <div class="navbar-header pull-left">
		    	<a class="navbar-brand" href="/">QUOTENOTE</a>
		  </div>
		</nav>
	</div>
</template>

<template name="heading">
	<div class="row">
		{{#if currentUser.quoteMaster}}
			<h3> Welcome, Quote Master {{currentUser.username}}!</h3> 
		{{else}}
			<h3>Hello {{currentUser.username}}</h3>
		{{/if}}
	</div>
</template>

<template name="quoteMasterPage">
	{{#if activeGame}}
		{{> currentQ}}
		{{> hints}}
		{{> hint}}
		{{> incomingAnswers}}
	{{else}}
		{{> askQuestion}}
		{{> leaderboard}}
	{{/if}}
</template>

<template name="askQuestion">
	<div class="row">
		<div class="col-md-8">
		<label for="questionInput">Start a new round:</label>
		<input id="questionInput" class="form-control" type="text" placeholder="Ask a question!">
		</div>
	</div>
</template>

<template name="hints">
	{{#if hasHints}}
	<div class="row">
	<div class="col-md-8">
		<h4>Hints:</h4>
		<ul>
		{{#each hints}}
			<li>{{text}}</li>
		{{/each}}
		</ul>
	</div>
	</div>
	{{/if}}
</template>

<template name="hint">
	<button id= "hintBtn" class="btn btn-primary pull-left">Give a hint!</button>
	<input id="hintInput" class="form-control gone" type="text" placeholder="Give a hint!">
</template>

<template name="incomingAnswers">
	<div class="row">
	<div id="activeAnswers" class="col-md-10 col-md-offset-1">
		<h3>Incoming Answers: </h3>
		<table class="table table-striped">
		<tbody>
		{{#each inAnswers}}
		<tr id="{{_id}}">
			<td class="table-text">From: {{owner}}</td>
			<td class="table-text"><b>{{text}}</b></td>
			<td class="table-text">{{time}}</td>
			<td><button class="btn btn-danger">Wrong</button>
				<button class="btn btn-success">Correct</button>
			</td>
		</tr>
		{{/each}}
		</tbody>
		</table>
		
		<h3>Rejected Answers: </h3>
		<table class="table table-striped">
		<tbody>
		{{#each rejectAnswers}}
		<tr id="{{_id}}">
			<td class="table-text">From: {{owner}}</td>
			<td class="table-text"><b>{{text}}</b></td>
			<td class="table-text">{{time}}</td>
			<td><button class="btn btn-success">Mark Correct</button>
			</td>
		</tr>
		{{/each}}
		</tbody>
		</table>
	
	</div>
	</div>
</template>

<template name="currentQ">
	<h3><span class="label label-info"> Current Question: </span></h3>
	<div class="jumbotron">
	  </p>"{{currentQuestion.text}}"</p>
	  <small class="pull-right">{{currentQuestion.time}}</small>
	</div>
</template>


<template name="logout">
	<button id="logout" class="btn"> Logout </button> 
	{{#if currentUser.isAdmin}}
		<a href="/admin" class="btn btn-primary">Admin</a>
	{{/if}}
</template>

<template name="answers">
	<div class="row">
	<div id="activeAnswers" class="col-md-10 col-md-offset-1">
		<h5>Your answers: </h5>
		<table class="table table-striped">
		<tbody>
		{{#each answers}}
		<tr id="{{_id}}">
			<td >{{text}}</td>
			<td>{{time}}</td>
			<td> {{#if active}}
				<span class="label label-warning"> Pending... </span>
				{{else}}
					{{#if wrong}}
						<span class="label label-default"> Wrong </span>
					{{else}}
						<span class="label label-success"> Correct </span>
					{{/if}}
				{{/if}} </td>
		</tr>				
		{{/each}}
		</tbody>
		</table>
	</div>
	</div>
</template>

<template name="input">
	{{#if canAnswer}}
		<input id="answerInput" class="form-control" type="text" placeholder="Answer current question">
	{{else}}
		<h6> you have no more guesses </h6>
	{{/if}}
</template>

<template name="login">
	<h1> Welcome to QUOTENET </h1>


	<div class="col-md-6 border-right">
	<h3>Login:</h3>
		<span id="login-unsuc" class="label label-danger hidden"> Wrong username/password </span>
		<form role="form">
		  <div class="form-group">
		    <input type="email" class="form-control" id="usernameInput" placeholder="Username">
		  </div>
		  <div class="form-group">
		    <input type="password" class="form-control" id="passwordInput" placeholder="Password">
		  </div>
		  <button id="submit" type="submit" class="btn btn-primary">Submit!</button>
		 </form>
	 </div>

	 <div class="col-md-6">
	<h3>Create Account:</h3>
		<form role="form">
		  <div class="form-group">
		    <input type="email" class="form-control" id="usernameInputCreate" placeholder="Username">
		  </div>
		  <div class="form-group">
		    <input type="password" class="form-control" id="passwordInputCreate" placeholder="Password">
		  </div>
		  <button id="submitCreate" type="submit" class="btn btn-primary">Create!</button>
		 </form>
	 </div>
</template>

